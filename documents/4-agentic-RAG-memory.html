<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agentic RAG: Process Flow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .card {
            background-color: #1F2937; /* bg-gray-800 */
            border: 1px solid #374151; /* border-gray-700 */
            border-radius: 0.75rem; /* rounded-xl */
            padding: 1.5rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(16, 185, 129, 0.1), 0 4px 6px -2px rgba(16, 185, 129, 0.05);
        }
        .code-block {
            background-color: #111827; /* bg-gray-900 */
            border-radius: 0.5rem; /* rounded-lg */
            padding: 1rem;
            font-family: monospace;
            font-size: 0.875rem; /* text-sm */
            overflow-x: auto;
            color: #d1d5db; /* text-gray-300 */
        }
        .arrow {
            font-size: 2.5rem;
            color: #4B5563; /* text-gray-600 */
            margin: 1.5rem 0;
            text-align: center;
        }
    </style>
</head>
<body class="bg-gray-900 text-white">

    <div class="container mx-auto p-4 sm:p-8">
        <header class="text-center mb-12">
            <h1 class="text-4xl sm:text-5xl font-bold mb-2 bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 to-teal-400">
                ðŸ“š Agentic RAG: Process Flow
            </h1>
            <p class="text-lg text-gray-400 max-w-3xl mx-auto">
                How an agent uses external documents (like a PDF) to answer questions with up-to-date, relevant information.
            </p>
        </header>

        <div class="space-y-6">

            <!-- Step 1: Data Ingestion -->
            <div class="card">
                <div class="flex items-center mb-4">
                    <div class="bg-teal-500/20 p-3 rounded-lg mr-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-teal-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" /></svg>
                    </div>
                    <div>
                        <h2 class="text-2xl font-semibold text-white">1. Data Ingestion & Processing</h2>
                        <p class="text-gray-400">The agent first learns from an external document.</p>
                    </div>
                </div>
                <p class="mb-4 text-gray-300">The system reads a PDF, splits its text into smaller, manageable "passages," and uses the Gemini Embedding Model to convert each passage into a numerical vector. These vectors are stored in an in-memory "vector database."</p>
                <div class="code-block">
<pre><code><span class="text-gray-500">// 1. Read PDF</span>
pdf_text = extract_text_from_pdf("handbook.pdf")
<span class="text-gray-500">// 2. Split into passages</span>
passages = create_passages(pdf_text)
<span class="text-gray-500">// 3. Create numerical embeddings</span>
embeddings = genai.embed_content(content=passages)
<span class="text-gray-500">// 4. Store in a vector database</span>
vector_db = create_database(passages, embeddings)</code></pre>
                </div>
            </div>

            <div class="arrow">â†“</div>

            <!-- Step 2: User Query -->
            <div class="card">
                <div class="flex items-center mb-4">
                    <div class="bg-cyan-500/20 p-3 rounded-lg mr-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-cyan-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" /></svg>
                    </div>
                    <div>
                        <h2 class="text-2xl font-semibold text-white">2. The User's Question</h2>
                        <p class="text-gray-400">The user asks a question related to the document.</p>
                    </div>
                </div>
                <div class="code-block">
<pre><code><span class="text-cyan-400">user_message</span> = "What is the company's vacation policy?"</code></pre>
                </div>
            </div>
            
            <div class="arrow">â†“</div>

            <!-- Step 3: Retrieval -->
            <div class="card">
                <div class="flex items-center mb-4">
                    <div class="bg-emerald-500/20 p-3 rounded-lg mr-4">
                       <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-emerald-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
                    </div>
                    <div>
                        <h2 class="text-2xl font-semibold text-white">3. Retrieval: Finding Relevant Information</h2>
                        <p class="text-gray-400">The agent's tool searches the vector database for answers.</p>
                    </div>
                </div>
                <p class="mb-4 text-gray-300">The agent decides to use the `archival_memory_search` tool. This tool converts the user's question into a vector and compares it to all the passage vectors in the database to find the most similar (i.e., most relevant) text passages.</p>
                <div class="code-block">
<pre><code><span class="text-gray-500">// 1. Embed the user's query</span>
query_embedding = genai.embed_content("vacation policy")
<span class="text-gray-500">// 2. Search the database for similar vectors</span>
relevant_passages = vector_db.search(query_embedding)
<span class="text-gray-500">// 3. Return the text of the top matching passages</span>
<span class="text-yellow-300">"Vacations are permitted only under the following condition..."</span></code></pre>
                </div>
            </div>

            <div class="arrow">â†“</div>

            <!-- Step 4: Memory Augmentation -->
            <div class="card">
                <div class="flex items-center mb-4">
                     <div class="bg-indigo-500/20 p-3 rounded-lg mr-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-indigo-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    </div>
                    <div>
                        <h2 class="text-2xl font-semibold text-white">4. Memory Augmentation: The "Just-in-Time" Update</h2>
                        <p class="text-gray-400">The retrieved information is added to the agent's short-term memory.</p>
                    </div>
                </div>
                <p class="mb-4 text-gray-300">The relevant passages found in the retrieval step are automatically added to the conversation history. This "augments" the agent's memory for the current turn, providing fresh, factual context for its final answer.</p>
                 <div class="code-block border-l-4 border-indigo-400">
<pre><code><span class="text-gray-500">// Original User Message</span>
What is the company's vacation policy?

<span class="text-gray-500">// + Retrieved Context (The Memory Update)</span>
Context: "Vacations are permitted only under the following condition: 
you must provide an AI agent..."</code></pre>
                </div>
            </div>

            <div class="arrow">â†“</div>

            <!-- Step 5: Generation -->
            <div class="card">
                <div class="flex items-center mb-4">
                     <div class="bg-rose-500/20 p-3 rounded-lg mr-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-rose-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.196-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.783-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" /></svg>
                    </div>
                    <div>
                        <h2 class="text-2xl font-semibold text-white">5. Generation: The Final Answer</h2>
                        <p class="text-gray-400">The model generates a final, context-aware response.</p>
                    </div>
                </div>
                <p class="mb-4 text-gray-300">Using the augmented prompt, the Gemini model generates a helpful, accurate answer that is grounded in the information from the external document.</p>
                <div class="code-block">
<pre><code><span class="text-gray-500"># Final Agent Output</span>
Here's what I found about our vacation policies: 
Vacations are permitted only under the following conditions...</code></pre>
                </div>
            </div>

        </div>
    </div>

</body>
</html>
